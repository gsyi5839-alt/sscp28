import{d as T,m as W,r as B,o as J,x as K,E as P,c as p,i as e,j as o,k as s,a as n,t as u,u as d,b as X,n as a,e as m}from"./index-BMkPK7iF.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"dashboard"},ee={class:"logo"},oe={class:"header-right"},te={class:"user-dropdown"},se={class:"username"},ne={class:"welcome-section"},le={class:"card-header"},ae={class:"card-header"},de={key:0,class:"loading-status"},re={key:1,class:"health-status"},ue={class:"service-name"},ce={key:2,class:"health-status"},_e={class:"card-header"},ie={class:"quick-actions"},pe=T({__name:"Dashboard",setup(me){const c=X(),r=W(),_=B(null),i=B(!1);J(async()=>{await r.fetchUser(),await f()});const f=async()=>{i.value=!0;try{const v=await K.check();v.code===200&&(_.value=v.data)}catch{P.warning("Could not connect to backend")}i.value=!1},S=()=>{r.logout(),c.push("/")};return(v,t)=>{const A=s("Monitor"),l=s("el-icon"),z=s("el-avatar"),D=s("ArrowDown"),E=s("Lock"),h=s("el-dropdown-item"),y=s("House"),H=s("SwitchButton"),L=s("el-dropdown-menu"),R=s("el-dropdown"),U=s("el-header"),I=s("User"),k=s("el-descriptions-item"),g=s("el-tag"),M=s("el-descriptions"),w=s("el-card"),C=s("el-col"),F=s("Connection"),N=s("Loading"),V=s("CircleCheck"),$=s("CircleClose"),b=s("el-button"),j=s("InfoFilled"),q=s("Refresh"),G=s("el-row"),O=s("el-main"),Q=s("el-container");return m(),p("div",Z,[e(Q,null,{default:o(()=>[e(U,{class:"dashboard-header"},{default:o(()=>[n("div",ee,[e(l,{size:28},{default:o(()=>[e(A)]),_:1}),t[3]||(t[3]=n("span",null,"BCBBS Dashboard",-1))]),n("div",oe,[e(R,null,{dropdown:o(()=>[e(L,null,{default:o(()=>[e(h,{onClick:t[0]||(t[0]=x=>d(c).push("/change-password"))},{default:o(()=>[e(l,null,{default:o(()=>[e(E)]),_:1}),t[4]||(t[4]=a(" ä¿®æ”¹å¯†ç  ",-1))]),_:1}),e(h,{onClick:t[1]||(t[1]=x=>d(c).push("/"))},{default:o(()=>[e(l,null,{default:o(()=>[e(y)]),_:1}),t[5]||(t[5]=a(" Home ",-1))]),_:1}),e(h,{divided:"",onClick:S},{default:o(()=>[e(l,null,{default:o(()=>[e(H)]),_:1}),t[6]||(t[6]=a(" Logout ",-1))]),_:1})]),_:1})]),default:o(()=>[n("span",te,[e(z,{size:32,icon:"User"}),n("span",se,u(d(r).user?.nickname||d(r).user?.username),1),e(l,null,{default:o(()=>[e(D)]),_:1})])]),_:1})])]),_:1}),e(O,{class:"dashboard-main"},{default:o(()=>[n("div",ne,[n("h1",null,"Welcome, "+u(d(r).user?.nickname||d(r).user?.username)+"! ðŸ‘‹",1),t[7]||(t[7]=n("p",null,"Here's your dashboard overview",-1))]),e(G,{gutter:20},{default:o(()=>[e(C,{xs:24,sm:12,md:8},{default:o(()=>[e(w,{class:"stat-card"},{header:o(()=>[n("div",le,[e(l,{size:24,color:"#409EFF"},{default:o(()=>[e(I)]),_:1}),t[8]||(t[8]=n("span",null,"User Info",-1))])]),default:o(()=>[e(M,{column:1,border:""},{default:o(()=>[e(k,{label:"Username"},{default:o(()=>[a(u(d(r).user?.username),1)]),_:1}),e(k,{label:"Email"},{default:o(()=>[a(u(d(r).user?.email),1)]),_:1}),e(k,{label:"Role"},{default:o(()=>[e(g,{type:d(r).user?.role==="ADMIN"?"danger":"success"},{default:o(()=>[a(u(d(r).user?.role),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1})]),_:1}),e(C,{xs:24,sm:12,md:8},{default:o(()=>[e(w,{class:"stat-card"},{header:o(()=>[n("div",ae,[e(l,{size:24,color:"#67C23A"},{default:o(()=>[e(F)]),_:1}),t[9]||(t[9]=n("span",null,"Backend Status",-1))])]),default:o(()=>[i.value?(m(),p("div",de,[e(l,{class:"is-loading"},{default:o(()=>[e(N)]),_:1}),t[10]||(t[10]=a(" Checking... ",-1))])):_.value?(m(),p("div",re,[e(g,{type:"success",size:"large"},{default:o(()=>[e(l,null,{default:o(()=>[e(V)]),_:1}),a(" "+u(_.value.status),1)]),_:1}),n("p",ue,u(_.value.service),1)])):(m(),p("div",ce,[e(g,{type:"danger",size:"large"},{default:o(()=>[e(l,null,{default:o(()=>[e($)]),_:1}),t[11]||(t[11]=a(" Offline ",-1))]),_:1}),t[12]||(t[12]=n("p",{class:"service-name"},"Backend not available",-1))])),e(b,{type:"primary",text:"",onClick:f,loading:i.value,style:{"margin-top":"10px"}},{default:o(()=>[...t[13]||(t[13]=[a(" Refresh Status ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),e(C,{xs:24,sm:12,md:8},{default:o(()=>[e(w,{class:"stat-card"},{header:o(()=>[n("div",_e,[e(l,{size:24,color:"#E6A23C"},{default:o(()=>[e(j)]),_:1}),t[14]||(t[14]=n("span",null,"Quick Actions",-1))])]),default:o(()=>[n("div",ie,[e(b,{type:"primary",onClick:t[2]||(t[2]=x=>d(c).push("/"))},{default:o(()=>[e(l,null,{default:o(()=>[e(y)]),_:1}),t[15]||(t[15]=a(" Go to Home ",-1))]),_:1}),e(b,{onClick:f},{default:o(()=>[e(l,null,{default:o(()=>[e(q)]),_:1}),t[16]||(t[16]=a(" Refresh ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),he=Y(pe,[["__scopeId","data-v-b36be265"]]);export{he as default};
