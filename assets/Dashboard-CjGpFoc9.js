import{d as Q,m as T,r as x,f as W,s as J,E as K,c as i,i as e,j as o,k as s,a as n,t as c,u as r,b as P,n as a,o as p}from"./index-BwHdDv88.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"dashboard"},Z={class:"logo"},ee={class:"header-right"},oe={class:"user-dropdown"},te={class:"username"},se={class:"welcome-section"},ne={class:"card-header"},le={class:"card-header"},ae={key:0,class:"loading-status"},de={key:1,class:"health-status"},re={class:"service-name"},ce={key:2,class:"health-status"},ue={class:"card-header"},_e={class:"quick-actions"},ie=Q({__name:"Dashboard",setup(pe){const m=P(),d=T(),u=x(null),_=x(!1);W(async()=>{await d.fetchUser(),await f()});const f=async()=>{_.value=!0;try{const h=await J.check();h.code===200&&(u.value=h.data)}catch{K.warning("Could not connect to backend")}_.value=!1},B=()=>{d.logout(),m.push("/")};return(h,t)=>{const S=s("Monitor"),l=s("el-icon"),A=s("el-avatar"),z=s("ArrowDown"),y=s("House"),b=s("el-dropdown-item"),D=s("SwitchButton"),E=s("el-dropdown-menu"),H=s("el-dropdown"),R=s("el-header"),U=s("User"),v=s("el-descriptions-item"),g=s("el-tag"),I=s("el-descriptions"),k=s("el-card"),w=s("el-col"),M=s("Connection"),F=s("Loading"),L=s("CircleCheck"),N=s("CircleClose"),C=s("el-button"),V=s("InfoFilled"),$=s("Refresh"),j=s("el-row"),q=s("el-main"),G=s("el-container");return p(),i("div",Y,[e(G,null,{default:o(()=>[e(R,{class:"dashboard-header"},{default:o(()=>[n("div",Z,[e(l,{size:28},{default:o(()=>[e(S)]),_:1}),t[2]||(t[2]=n("span",null,"BCBBS Dashboard",-1))]),n("div",ee,[e(H,null,{dropdown:o(()=>[e(E,null,{default:o(()=>[e(b,{onClick:t[0]||(t[0]=O=>r(m).push("/"))},{default:o(()=>[e(l,null,{default:o(()=>[e(y)]),_:1}),t[3]||(t[3]=a(" Home ",-1))]),_:1}),e(b,{divided:"",onClick:B},{default:o(()=>[e(l,null,{default:o(()=>[e(D)]),_:1}),t[4]||(t[4]=a(" Logout ",-1))]),_:1})]),_:1})]),default:o(()=>[n("span",oe,[e(A,{size:32,icon:"User"}),n("span",te,c(r(d).user?.nickname||r(d).user?.username),1),e(l,null,{default:o(()=>[e(z)]),_:1})])]),_:1})])]),_:1}),e(q,{class:"dashboard-main"},{default:o(()=>[n("div",se,[n("h1",null,"Welcome, "+c(r(d).user?.nickname||r(d).user?.username)+"! ðŸ‘‹",1),t[5]||(t[5]=n("p",null,"Here's your dashboard overview",-1))]),e(j,{gutter:20},{default:o(()=>[e(w,{xs:24,sm:12,md:8},{default:o(()=>[e(k,{class:"stat-card"},{header:o(()=>[n("div",ne,[e(l,{size:24,color:"#409EFF"},{default:o(()=>[e(U)]),_:1}),t[6]||(t[6]=n("span",null,"User Info",-1))])]),default:o(()=>[e(I,{column:1,border:""},{default:o(()=>[e(v,{label:"Username"},{default:o(()=>[a(c(r(d).user?.username),1)]),_:1}),e(v,{label:"Email"},{default:o(()=>[a(c(r(d).user?.email),1)]),_:1}),e(v,{label:"Role"},{default:o(()=>[e(g,{type:r(d).user?.role==="ADMIN"?"danger":"success"},{default:o(()=>[a(c(r(d).user?.role),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{xs:24,sm:12,md:8},{default:o(()=>[e(k,{class:"stat-card"},{header:o(()=>[n("div",le,[e(l,{size:24,color:"#67C23A"},{default:o(()=>[e(M)]),_:1}),t[7]||(t[7]=n("span",null,"Backend Status",-1))])]),default:o(()=>[_.value?(p(),i("div",ae,[e(l,{class:"is-loading"},{default:o(()=>[e(F)]),_:1}),t[8]||(t[8]=a(" Checking... ",-1))])):u.value?(p(),i("div",de,[e(g,{type:"success",size:"large"},{default:o(()=>[e(l,null,{default:o(()=>[e(L)]),_:1}),a(" "+c(u.value.status),1)]),_:1}),n("p",re,c(u.value.service),1)])):(p(),i("div",ce,[e(g,{type:"danger",size:"large"},{default:o(()=>[e(l,null,{default:o(()=>[e(N)]),_:1}),t[9]||(t[9]=a(" Offline ",-1))]),_:1}),t[10]||(t[10]=n("p",{class:"service-name"},"Backend not available",-1))])),e(C,{type:"primary",text:"",onClick:f,loading:_.value,style:{"margin-top":"10px"}},{default:o(()=>[...t[11]||(t[11]=[a(" Refresh Status ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),e(w,{xs:24,sm:12,md:8},{default:o(()=>[e(k,{class:"stat-card"},{header:o(()=>[n("div",ue,[e(l,{size:24,color:"#E6A23C"},{default:o(()=>[e(V)]),_:1}),t[12]||(t[12]=n("span",null,"Quick Actions",-1))])]),default:o(()=>[n("div",_e,[e(C,{type:"primary",onClick:t[1]||(t[1]=O=>r(m).push("/"))},{default:o(()=>[e(l,null,{default:o(()=>[e(y)]),_:1}),t[13]||(t[13]=a(" Go to Home ",-1))]),_:1}),e(C,{onClick:f},{default:o(()=>[e(l,null,{default:o(()=>[e($)]),_:1}),t[14]||(t[14]=a(" Refresh ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),he=X(ie,[["__scopeId","data-v-6e6adc05"]]);export{he as default};
